<div class="box box-primary">
  <div class="box-header with-border">
    <h3 class="box-title" v-if="title">{{ title }}</h3>
    <h3 class="box-title" v-else>Lista de <span class="text-capital">{{ model.plural }}</span></h3>
  </div>
  <!--box-body-->
  <div class="box-body">
    <div class="row">
      <div class="col-md-12 col-sm-12 col-xs-12 mb-25">
        <a :href="route.create" class="btn btn-primary pull pull-right" name="btnadd">
          <i class="fa fa-plus"></i> {{ PanalConf.lang.button.create }} <span class="text-capital">{{ model.singular }}</span>
        </a>
      </div>
    </div>
    <div class="row">
      <!-- Table container -->
      <div class="col-md-12 col-sm-12 col-xs-12 table-container">
        <div class="table-responsive">
          <table id="smartTable" class="table table-striped table-bordered" cellspacing="0" width="100%">
            <thead>
              <tr>
                <th>Fecha</th>
                <th>Nro</th>
                <th>Tipo</th>
                <th>Ubicación</th>
                <th>Última derivación</th>
                <th>Derivado a</th>
                <th>Recibido por</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tfoot v-if="showTfoot">
              <tr>
                <th>Fecha</th>
                <th>Nro</th>
                <th>Tipo</th>
                <th>Ubicación</th>
                <th>Última derivación</th>
                <th>Derivado a</th>
                <th>Recibido por</th>
                <th>Acciones</th>
              </tr>
            </tfoot>
            <tbody>
              <tr v-for="solicitud in rows">
                <td role="button" :title="solicitud.derivacion.derivado_el | datetimeToHuman">{{ solicitud.creado_el | date }}</td>
                <td>{{ solicitud.id }}</td>
                <td>{{ solicitud.tipo }}</td>
                <td>{{ solicitud.ubicacion }}</td>
                <td role="button" :title="solicitud.derivacion.derivado_el | datetimeToHuman">{{ solicitud.derivacion.derivado_el | date }}</td>
                <td>{{ solicitud.derivacion.area }}</td>
                <td>{{ solicitud.derivacion.agente }}</td>
                <td class="actions-column">
                  <div class="actions-group">
                    <a role="button" class='btn btn-default' data-toggle="tooltip" data-placement="top" title="Crear Seguimiento" v-on:click="onClickSeguimiento(solicitud.id)">
                      <span class="fa fa-commenting-o"></span>
                    </a>
                    <a role="button" class='btn btn-default' data-toggle="tooltip" data-placement="top" title="Derivar Solicitud" v-on:click="onClickDerivacion(solicitud.id, solicitud.derivacion.id)">
                      <span class="fa fa-paper-plane"></span>
                    </a>
                    <a role="button" class='btn btn-default' data-toggle="tooltip" data-placement="top" title="Imprimir" :href="route.imprimir(solicitud.id)" target="_blank">
                      <span class="fa fa-print"></span>
                    </a>
                  </div>
                  <div class="actions-group">
                    <a role="button" class='btn btn-default' data-toggle="tooltip" data-placement="top" title="Ver Timeline" :href="route.timeline(solicitud.id)">
                      <span class="fa fa-clock-o"></span>
                    </a>
                    <a role="button" class='btn btn-primary' v-if="hasModal" v-on:click="openUpdateModal(solicitud.id)" data-toggle="modal"
                      data-target="#modal">
                      <span class="fa fa-pencil"></span>
                    </a>
                    <a :href="route.edit(solicitud.id)" class="btn btn-primary" v-else>
                      <span class="fa fa-pencil"></span>
                    </a>
                    <a role="button" class="btn btn-danger" v-on:click="destroy(solicitud.id)">
                      <span class="fa fa-trash"></span>
                    </a>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <!--End table container-->
    </div>
  </div>
  <!--end box-body-->
  <panal-indicator></panal-indicator>
  <!-- derivacions modal -->
  <div class="modal fade derivaciones" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title">Derivar Solicitud</h4>
        </div>
        <form class="form-horizontal" v-on:submit.prevent="derivacionesSubmit()">
          <div class="modal-body smart-modal-form">
            <div class="form-group">
              <label for="derivado_el" class="col-sm-2 control-label">Fecha</label>
              <div class="col-sm-10">
                <panal-datetime name="derivado_el" :value="derivaciones_data.derivado_el"></panal-datetime>
              </div>
            </div>
            <div class="form-group">
              <label for="area_id" class="col-sm-2 control-label">Area</label>
              <div class="col-sm-10">
                <select class="form-control" name="area_id" id="area_id" v-model="derivaciones_data.area_id" required>
                      <option value="">Seleccione</option>
                      <option v-for="area in areas" :value="area.id">{{ area.nombre }}</option>
                    </select>
              </div>
            </div>
            <div class="form-group">
              <label for="agente_id" class="col-sm-2 control-label">Agente</label>
              <div class="col-sm-10">
                <select class="form-control" name="agente_id" id="agente_id" v-model="derivaciones_data.agente_id" required>
                      <option value="">Seleccione</option>
                      <option v-for="agente in agentes" :value="agente.id">{{ agente.nombre_completo }}</option>
                    </select>
              </div>
            </div>
            <div class="form-group">
              <label for="observaciones" class="col-sm-2 control-label">Observaciones</label>
              <div class="col-sm-10">
                <textarea class="form-control" id="observaciones" name="observaciones" v-model="derivaciones_data.observaciones"></textarea>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <a type="button" class="btn btn-default" data-dismiss="modal">Cancelar</a>
            <button type="submit" class="btn btn-primary">Guardar</button>
          </div>
        </form>
      </div>
      <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
  </div>
  <!-- /derivacions modal -->
  <!-- seguimientos modal -->
  <div class="modal fade seguimientos" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title">Crear Seguimiento</h4>
        </div>
        <form class="form-horizontal" v-on:submit.prevent="seguimientosSubmit()">
          <div class="modal-body smart-modal-form">
            <div class="form-group">
              <label for="derivado_el" class="col-sm-2 control-label">Fecha</label>
              <div class="col-sm-10">
                <panal-datetime name="generado_el" :value="seguimientos_data.generado_el"></panal-datetime>
              </div>
            </div>
            <div class="form-group">
              <label for="descripcion" class="col-sm-2 control-label">Descripción</label>
              <div class="col-sm-10">
                <textarea class="form-control" id="descripcion" name="descripcion" v-model="seguimientos_data.descripcion" required></textarea>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <a type="button" class="btn btn-default" data-dismiss="modal">{{ PanalConf.lang.button.cancel }}</a>
            <button type="submit" class="btn btn-primary">{{ PanalConf.lang.button.store }}</button>
          </div>
        </form>
      </div>
      <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
  </div>
  <!-- /seguimientos modal -->
</div>
